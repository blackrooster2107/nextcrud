(()=>{var e={};e.id=416,e.ids=[416],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},4460:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>b,tree:()=>d});var r=a(7096),i=a(6132),n=a(7284),o=a.n(n),s=a(2564),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);a.d(t,l);let d=["",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4137)),"/home/ian/Projects/NextJs/crudapp/app/edit/[id]/page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,8757)),"/home/ian/Projects/NextJs/crudapp/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/ian/Projects/NextJs/crudapp/app/edit/[id]/page.jsx"],p="/edit/[id]/page",u={require:a,loadChunk:()=>Promise.resolve()},b=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/edit/[id]/page",pathname:"/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8284:(e,t,a)=>{let r={cb0f76b7049167e5bc930aa4734ad66381603cb8:()=>Promise.resolve().then(a.bind(a,9205)).then(e=>e.Delete),"1ce757c78e6bffa5c3029e54dbd340bb65870ef4":()=>Promise.resolve().then(a.bind(a,9205)).then(e=>e.Update),"21550e0045be0032b9089863d1acf38e054ab6e8":()=>Promise.resolve().then(a.bind(a,9205)).then(e=>e.Create)};async function endpoint(e,...t){let a=await r[e]();return a.apply(null,t)}e.exports={cb0f76b7049167e5bc930aa4734ad66381603cb8:endpoint.bind(null,"cb0f76b7049167e5bc930aa4734ad66381603cb8"),"1ce757c78e6bffa5c3029e54dbd340bb65870ef4":endpoint.bind(null,"1ce757c78e6bffa5c3029e54dbd340bb65870ef4"),"21550e0045be0032b9089863d1acf38e054ab6e8":endpoint.bind(null,"21550e0045be0032b9089863d1acf38e054ab6e8")}},5303:()=>{},4137:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Page});var r=a(4656),i=a(9205);async function Page({params:e}){let{id:t}=e,getItem=async()=>{try{let e=await fetch(`http://localhost:3000/api/items/${t}`,{cache:"no-store",next:{tags:["items"]}});if(!e.ok)throw Error("Failed to fetch data");return e.json()}catch(e){return null}},a=await getItem();if(await a===null)return r.jsx(r.Fragment,{children:"data error"});{let e=a.item;return(0,r.jsxs)("form",{action:i.Update,className:"flex flex-col mt-5 gap-3",children:[r.jsx("input",{type:"hidden",name:"id",value:e._id}),r.jsx("input",{placeholder:"Title",name:"newTitle",defaultValue:e.title,className:"border-2 px-5 py-2"}),r.jsx("textarea",{placeholder:"Description",name:"newDescription",defaultValue:e.description,className:"border-2 px-5 py-2"}),r.jsx("button",{name:"intent",value:"update",className:"bg-green-500 rounded-md w-fit px-4 py-2 font-bold",children:"Update Item"})]})}}},9205:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Create:()=>Create,Delete:()=>Delete,Update:()=>Update});var r=a(4600);a(1639);var i=a(1726),n=a(1412),o=a(2990);let Create=async e=>{let t={};for(let[a,r]of e)t[a]=r;let a=t.title,r=t.description;try{let e=await fetch("http://localhost:3000/api/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a,description:r})});if(e.ok)(0,i.revalidateTag)("items"),(0,i.revalidatePath)("/"),console.log(`${a} added`);else throw Error("failed to add data")}catch(e){console.log(e)}(0,n.redirect)("/")},Delete=async(e,t)=>{try{let a=await fetch(`http://localhost:3000/api/items?id=${e}`,{method:"DELETE"});a.ok&&((0,i.revalidateTag)("items"),(0,i.revalidatePath)("/"),console.log(`${t} deleted`))}catch(e){console.log(e)}(0,n.redirect)("/")},Update=async e=>{let t={};for(let[a,r]of e)t[a]=r;let a=t.newTitle,r=t.newDescription;try{let e=await fetch(`http://localhost:3000/api/items/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newTitle:a,newDescription:r})});e.ok&&((0,i.revalidateTag)("items"),(0,i.revalidatePath)("/"),console.log(`${a} updated`))}catch(e){console.log(e)}(0,n.redirect)("/")};(0,o.h)([Create,Delete,Update]),(0,r.U)("21550e0045be0032b9089863d1acf38e054ab6e8",null,Create),(0,r.U)("cb0f76b7049167e5bc930aa4734ad66381603cb8",null,Delete),(0,r.U)("1ce757c78e6bffa5c3029e54dbd340bb65870ef4",null,Update)},7481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=a(8531);let __WEBPACK_DEFAULT_EXPORT__=e=>{let t=(0,r.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[126,992,323,770,886],()=>__webpack_exec__(4460));module.exports=a})();